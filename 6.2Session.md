# Session

## Cookie 的不足之处
1. 所有的数据都是存储在客户端，容易被篡改，容易泄漏信息；
2. 大量的 Cookie 会占用客户的磁盘空间；
3. 每次用户发送HTTP 请求时，都会发送Cookie，如果Cookie太多，会导致网络流量的增加。

如果去解决上面的问题？

## Session
一种把会话数据保存在服务端的技术。服务器为每一个会话在服务端生成一个Session对象，并且将该 Session 对应的ID告知客户端。每次客户端发送HTTP请求时，都会带上该ID，服务端根据该ID检索对应的Session 对象。

**思考** 我们现实生活中有没有类似的例子？ 病历本 -> 医疗一卡通 VS Cookie -> Session

## HttpSession API
HttpServletRequst 定义了获取 Session 的接口：
1. `getSession(boolean create);` // 如果 create 为true，当Session不存在的时候，就创建一个Session
2. `getSession();` // 当Session不存在的时候，默认会创建一个 Session

方法|功能
--|--
`String getId()`|获取Session ID
`void setMaxInactiveInterval(int interval)`|设置Session最大可以空闲多久
`boolean isNew()`|判断这个Session是否新创建
`void invalidate()`|销毁Session
`void setAttribute(String key, Object value)`|存储数据
`Object getAttribute(String key)`|获取数据
`void removeAttribute(String key)`|删除指定的数据

**练习**  新建一个 Servlet，创建一个 Session ，如果 isNew 则写数据，如果 !isNew 则读数据。


<!--stackedit_data:
eyJoaXN0b3J5IjpbMTQzNTkyODk3XX0=
-->